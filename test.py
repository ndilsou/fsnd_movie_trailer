import unittest
import model
import media

MOVIE_DETAILS = {'adult': False, 'backdrop_path': '/AlFqBwJnokrp9zWTXOUv7uhkaeq.jpg', 'belongs_to_collection': None,
                 'budget': 200000000, 'genres': [{'id': 28, 'name': 'Action'}, {'id': 12, 'name': 'Adventure'},
                                                 {'id': 14, 'name': 'Fantasy'}, {'id': 878, 'name': 'Science Fiction'}],
                 'homepage': 'https://marvel.com/movies/movie/224/black_panther', 'id': 284054, 'imdb_id': 'tt1825683',
                 'original_language': 'en', 'original_title': 'Black Panther', 'overview': "King T'Challa returns "
                    "home from America to the reclusive, technologically advanced African nation of Wakanda to serve "
                    "as his country's new leader. However, T'Challa soon finds that he is challenged for the throne"
                    " by factions within his own country as well as without. Using powers reserved to Wakandan kings,"
                    " T'Challa assumes the Black Panther mantel to join with girlfriend Nakia, the queen-mother, "
                    "his princess-kid sister, members of the Dora Milaje (the Wakandan 'special forces') "
                    "and an American secret agent, to prevent Wakanda from being dragged into a world war.",
                 'popularity': 293.449724, 'poster_path': '/uxzzxijgPIY7slzFvMotPv8wjKA.jpg',
                 'production_companies': [{'id': 420, 'logo_path': '/hUzeosd33nzE5MCNsZxCGEKTXaQ.png',
                                           'name': 'Marvel Studios', 'origin_country': 'US'},
                                          {'id': 2, 'logo_path': '/4MbjW4f9bu6LvlDmyIvfyuT3boj.png', 'name': 'Walt Disney Pictures', 'origin_country': 'US'}], 'production_countries': [{'iso_3166_1': 'US', 'name': 'United States of America'}], 'release_date': '2018-02-13', 'revenue': 1341379495, 'runtime': 134, 'spoken_languages': [{'iso_639_1': 'en', 'name': 'English'}, {'iso_639_1': 'ko', 'name': '한국어/조선말'}, {'iso_639_1': 'sw', 'name': 'Kiswahili'}, {'iso_639_1': 'xh', 'name': ''}], 'status': 'Released', 'tagline': 'Long live the king', 'title': 'Black Panther', 'video': False, 'vote_average': 7.3, 'vote_count': 5331, 'videos': {'results': [{'id': '5a96a57c0e0a26544a008cf9', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'xjDjIWPwcPU', 'name': 'Official Trailer', 'site': 'YouTube', 'size': 1080, 'type': 'Trailer'}, {'id': '5a9730300e0a26016500595d', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'HnnRyhuX_jM', 'name': 'Warriors of Wakanda', 'site': 'YouTube', 'size': 1080, 'type': 'Featurette'}, {'id': '5a9730510e0a260153005b65', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'jJm2WFTscDM', 'name': 'Wakanda Revealed', 'site': 'YouTube', 'size': 1080, 'type': 'Featurette'}, {'id': '5a973072c3a368613d005542', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'y9fBzUtrKwY', 'name': 'Good to Be King', 'site': 'YouTube', 'size': 1080, 'type': 'Featurette'}, {'id': '5a97309b92514128a70052b3', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'yH72D12BkzY', 'name': 'From Page to Screen', 'site': 'YouTube', 'size': 1080, 'type': 'Featurette'}, {'id': '5aefc0fb0e0a261d8f00c2c0', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'PJBmeqpw3DY', 'name': 'Rise TV Spot', 'site': 'YouTube', 'size': 1080, 'type': 'Teaser'}, {'id': '5aefc158c3a36813ff014327', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'sgX_StgXGF0', 'name': 'Kinetic Energy', 'site': 'YouTube', 'size': 1080, 'type': 'Clip'}, {'id': '5aefc18b0e0a261d8600c902', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'zkWiTLKE0mg', 'name': "Let's Go TV Spot", 'site': 'YouTube', 'size': 1080, 'type': 'Teaser'}, {'id': '5aefc1b9c3a368142a00c59f', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': '2GTI0MHj3dM', 'name': 'War TV Spot', 'site': 'YouTube', 'size': 1080, 'type': 'Teaser'}, {'id': '5aefc1fe925141768800db7c', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': '3nS_wzicYX4', 'name': 'King TV Spot', 'site': 'YouTube', 'size': 1080, 'type': 'Teaser'}, {'id': '5aefc24dc3a368141e009996', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'mSAgLsrZG2Q', 'name': 'Entourage TV Spot', 'site': 'YouTube', 'size': 1080, 'type': 'Teaser'}, {'id': '5aefc2a90e0a261d7400c1d4', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'u0SBlLWNe5s', 'name': "It's A Set Up", 'site': 'YouTube', 'size': 1080, 'type': 'Clip'}, {'id': '5af96a36925141399600762a', 'iso_639_1': 'en', 'iso_3166_1': 'US', 'key': 'dxWvtMOGAhw', 'name': 'Black Panther Teaser Trailer [HD]', 'site': 'YouTube', 'size': 1080, 'type': 'Trailer'}]}, 'images': {'backdrops': [{'aspect_ratio': 1.777777777777778, 'file_path': '/m0RrN0Mw5lVmD0lV7vkSHq5njQk.jpg', 'height': 1080, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 1920}, {'aspect_ratio': 1.777777777777778, 'file_path': '/i96ssa3qzjCldOfj6wag9mRfXZO.jpg', 'height': 1080, 'iso_639_1': 'en', 'vote_average': 0.0, 'vote_count': 0, 'width': 1920}, {'aspect_ratio': 1.777777777777778, 'file_path': '/mCKusESgNuUV5ttHuCiuafQNLsv.jpg', 'height': 2160, 'iso_639_1': 'en', 'vote_average': 0.0, 'vote_count': 0, 'width': 3840}], 'posters': [{'aspect_ratio': 0.6666666666666666, 'file_path': '/uxzzxijgPIY7slzFvMotPv8wjKA.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.832, 'vote_count': 22, 'width': 2000}, {'aspect_ratio': 0.6584922797456857, 'file_path': '/pO01sYiYyP2qDlp2bLj2E5IyqC5.jpg', 'height': 1101, 'iso_639_1': 'en', 'vote_average': 5.518, 'vote_count': 12, 'width': 725}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/y1HTO8sZNiTSsq1EFdSfsqQPshW.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.384, 'vote_count': 2, 'width': 2000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/fqwCht54E1nGiWSaKIJwGiI3chD.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.326, 'vote_count': 7, 'width': 2000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/fj7sX7w0MfIxWylcizp5ArPIMFs.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.312, 'vote_count': 1, 'width': 2000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/9WRfiLhrkG3SlCYgpL7ytYL6idU.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.286, 'vote_count': 16, 'width': 1000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/qLrKYbJVZnkqvHlSVe8HPIxSKvb.jpg', 'height': 2700, 'iso_639_1': 'en', 'vote_average': 5.252, 'vote_count': 4, 'width': 1800}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/z53B9m5Oy9YaTwiBGigztO2VhUI.jpg', 'height': 1440, 'iso_639_1': 'en', 'vote_average': 5.246, 'vote_count': 2, 'width': 960}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/rGNm7xbs4MEgNa7xQtGuoi8sOcZ.jpg', 'height': 2250, 'iso_639_1': 'en', 'vote_average': 5.246, 'vote_count': 2, 'width': 1500}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/e9z2MpYWm8eTfqMhhhr65IyW7Ml.jpg', 'height': 2250, 'iso_639_1': 'en', 'vote_average': 5.246, 'vote_count': 2, 'width': 1500}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/iZz5mlUVhhJ8bzjgDRISDrf3ddJ.jpg', 'height': 2100, 'iso_639_1': 'en', 'vote_average': 5.246, 'vote_count': 2, 'width': 1400}, {'aspect_ratio': 0.6672727272727272, 'file_path': '/4ALXq4XkhWBm6fa6tVaqW6hlWod.jpg', 'height': 1100, 'iso_639_1': 'en', 'vote_average': 5.244, 'vote_count': 21, 'width': 734}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/sy8w5vVQUcaMbWgKuEXzaOrtQ0.jpg', 'height': 750, 'iso_639_1': 'en', 'vote_average': 5.19, 'vote_count': 5, 'width': 500}, {'aspect_ratio': 0.6690042075736325, 'file_path': '/ryz0hdtkKPcFKUsMw1Ur0U3mrGl.jpg', 'height': 1426, 'iso_639_1': 'en', 'vote_average': 5.19, 'vote_count': 5, 'width': 954}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/lDrbFXa6lTV427pTe6E0rLiAsSa.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 1000}, {'aspect_ratio': 0.6404494382022472, 'file_path': '/z8vakyCO8uW35xlTIZAJ5vTA7Z0.jpg', 'height': 2047, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 1311}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/1uR1sHmGRBRqB3ccXr7RtkwRB7t.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 2000}, {'aspect_ratio': 0.6712079927338783, 'file_path': '/3lZBCqRZc7dCo69o9T1pOv63WTV.jpg', 'height': 1101, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 739}, {'aspect_ratio': 0.6714158504007124, 'file_path': '/mtd9m8mtqN5hSknR4PF8y9eZvgc.jpg', 'height': 1123, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 754}, {'aspect_ratio': 0.6714158504007124, 'file_path': '/qehjETIbGaELUXro6LliMotBPND.jpg', 'height': 1123, 'iso_639_1': 'en', 'vote_average': 5.18, 'vote_count': 3, 'width': 754}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/kzSEpvKg0QtDgTG6RjZv27WIYnc.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 1000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/p2kxYuafihzR8DpIVN9ClDXi83G.jpg', 'height': 2250, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 1500}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/9oGVJj8zOMXoIPqDHGBfvSWCq2c.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 1000}, {'aspect_ratio': 0.66650390625, 'file_path': '/zdqIpqPka8lSHgj5mBvdKiwPopV.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 1365}, {'aspect_ratio': 0.666, 'file_path': '/2gDqPCX995zahQXVdKdMsitIYyE.jpg', 'height': 1000, 'iso_639_1': 'en', 'vote_average': 5.172, 'vote_count': 1, 'width': 666}, {'aspect_ratio': 0.6746666666666666, 'file_path': '/kNNtazn7jrfPs4eTlpPMdl8sUm0.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.164, 'vote_count': 14, 'width': 1012}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/vfkJ7LAbOMpSDfRmUUQXrbc6YP0.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.164, 'vote_count': 14, 'width': 1000}, {'aspect_ratio': 0.6690042075736325, 'file_path': '/5NR79sX9pSmA2JLBPnUGrRUelnv.jpg', 'height': 1426, 'iso_639_1': 'en', 'vote_average': 5.128, 'vote_count': 6, 'width': 954}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/48wtqhcARino5MYPgvbnLAXwLXC.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.118, 'vote_count': 4, 'width': 2000}, {'aspect_ratio': 0.667853962600178, 'file_path': '/oVPh8jas8hcJd2LhiZ5zrr8gBs0.jpg', 'height': 1123, 'iso_639_1': 'en', 'vote_average': 5.118, 'vote_count': 4, 'width': 750}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/2YFudk8WBRaUZLvBXahSuzEyQqO.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 2000}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/gAfynPwx5e7YiQCUqISGyvLwhh6.jpg', 'height': 3000, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 2000}, {'aspect_ratio': 0.7063758389261745, 'file_path': '/vP9glvYtaOSS4ebGP7F2QmWPfTH.jpg', 'height': 2384, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 1684}, {'aspect_ratio': 0.666, 'file_path': '/s6UpviVgeuU8y9xmizNT7XPlaXs.jpg', 'height': 1000, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 666}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/sEWUHL6DbdaTMeFRbOMCLNQCfq2.jpg', 'height': 1200, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 800}, {'aspect_ratio': 0.6752, 'file_path': '/g8YUI85YZC8QnexiH8tpwy94a3j.jpg', 'height': 2500, 'iso_639_1': 'en', 'vote_average': 5.106, 'vote_count': 2, 'width': 1688}, {'aspect_ratio': 0.6670025188916877, 'file_path': '/uzQFUPXxKNbhgWQePGEix9wYYKx.jpg', 'height': 1985, 'iso_639_1': 'en', 'vote_average': 5.1, 'vote_count': 13, 'width': 1324}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/kPuTYTzOJW1be3HdDK3H931SsgC.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.068, 'vote_count': 7, 'width': 1000}, {'aspect_ratio': 0.685546875, 'file_path': '/wHMB1DJIx23zPC3hqXJ6EWCgtyG.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.068, 'vote_count': 7, 'width': 1404}, {'aspect_ratio': 0.6404494382022472, 'file_path': '/AsX4WnvGtYb4aPTftnOp2gXR8KU.jpg', 'height': 2047, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1311}, {'aspect_ratio': 0.6856, 'file_path': '/jqomQL3nK3CzXwB8hBpW54TzoHk.jpg', 'height': 2500, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1714}, {'aspect_ratio': 0.6855918585966791, 'file_path': '/1osepjgWK9s6MOU2NVPxVFhUFM6.jpg', 'height': 1867, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1280}, {'aspect_ratio': 0.6875, 'file_path': '/76RM3sIjMMaJK50oWmzs6KF4nOF.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1408}, {'aspect_ratio': 0.685546875, 'file_path': '/zAD4KN5F7oLBx27DMOGrcmxzkdO.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.685546875, 'file_path': '/8axKfssEBOUt124jdkvy9EY4zvs.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.685546875, 'file_path': '/yFhrAkdLZNieWFp6J0UI0GQvRyN.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/dW6UrwcmNjQsd3UaFMSUanTSZaA.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.056, 'vote_count': 5, 'width': 1000}, {'aspect_ratio': 0.6753333333333333, 'file_path': '/wOH3sn3QIxohCw3Dgfz3CULiJKc.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 5.046, 'vote_count': 14, 'width': 1013}, {'aspect_ratio': 0.674, 'file_path': '/nQODSzglq1oT5ZGDzv59n1BuqJC.jpg', 'height': 1000, 'iso_639_1': 'en', 'vote_average': 5.044, 'vote_count': 3, 'width': 674}, {'aspect_ratio': 0.6858333333333333, 'file_path': '/r7ejNeVXK9DFAIsw4EC2rQqAGyF.jpg', 'height': 1200, 'iso_639_1': 'en', 'vote_average': 4.968, 'vote_count': 11, 'width': 823}, {'aspect_ratio': 0.6748046875, 'file_path': '/qwjHFKOnfUAoRpqaGT0dvdXJXd2.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 4.954, 'vote_count': 9, 'width': 1382}, {'aspect_ratio': 0.6670140698280355, 'file_path': '/krAPAxe25A2CH8CdxdAUhU9VYYk.jpg', 'height': 1919, 'iso_639_1': 'en', 'vote_average': 4.954, 'vote_count': 9, 'width': 1280}, {'aspect_ratio': 0.6998236331569665, 'file_path': '/5lVgfnAbufvxXvMfv7gvYgLHbfw.jpg', 'height': 2835, 'iso_639_1': 'en', 'vote_average': 4.922, 'vote_count': 5, 'width': 1984}, {'aspect_ratio': 0.685546875, 'file_path': '/mq0PN8GAvKF7HgseuPAXSxnT8Nl.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 4.922, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.685546875, 'file_path': '/6oOKyLGWYlnoYKckpkDBep3jerB.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 4.922, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.685546875, 'file_path': '/dYMK1Oyyx0OJsZZ5LG5JmCtA5LV.jpg', 'height': 2048, 'iso_639_1': 'en', 'vote_average': 4.922, 'vote_count': 5, 'width': 1404}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/v7D4eNg4xfQyBdi0LxJg0Dp8chF.jpg', 'height': 1500, 'iso_639_1': 'en', 'vote_average': 4.898, 'vote_count': 10, 'width': 1000}, {'aspect_ratio': 0.675, 'file_path': '/1VWoXEDY28G3VDOSmvm3AheNyUI.jpg', 'height': 1080, 'iso_639_1': 'en', 'vote_average': 4.882, 'vote_count': 8, 'width': 729}, {'aspect_ratio': 0.6495238095238095, 'file_path': '/zvve3gTUkEV0vwtTjJ4eibwWbFQ.jpg', 'height': 1575, 'iso_639_1': 'en', 'vote_average': 4.756, 'vote_count': 11, 'width': 1023}, {'aspect_ratio': 0.6666666666666666, 'file_path': '/krT7j5SXFmV649jGbi9aNG28R3Q.jpg', 'height': 1800, 'iso_639_1': 'en', 'vote_average': 0.0, 'vote_count': 0, 'width': 1200}, {'aspect_ratio': 0.675, 'file_path': '/wefDeCpAkf0aze6t2SGuGXc5yMm.jpg', 'height': 1200, 'iso_639_1': 'en', 'vote_average': 0.0, 'vote_count': 0, 'width': 810}]}}


class TheMovieDBFinderTestCase(unittest.TestCase):

    def setUp(self):
        self.finder = model.MovieFinder()

    def test_find_movie_id_from_query(self):
        query = {"query": "Black Panther", "year": 2018}
        movie_id = self.finder.get_media_id(query)
        self.assertEqual(284054, movie_id)

    def test_raise_error_on_wrong_query(self):
        query = {"name": "Black Panther", "year": 2018}
        with self.assertRaises(KeyError):
            movie_id = self.finder.get_media_id(query)

    def test_retrieve_movie_details_from_id(self):
        movie_id = 284054
        details = self.finder.get_media_details(movie_id)
        self.assertEqual(MOVIE_DETAILS, details)

    def test_extract_title_from_details(self):
        movie = self.finder.create_media_from_details(MOVIE_DETAILS)
        self.assertEqual(movie.title, "Black Panther")

    def test_extract_plotline_from_details(self):
        movie = self.finder.create_media_from_details(MOVIE_DETAILS)
        expected_plotline = "King T'Challa returns home from America to the reclusive, technologically advanced " \
                            "African nation of Wakanda to serve as his country's new leader. However, T'Challa soon " \
                            "finds that he is challenged for the throne by factions within his own country as " \
                            "well as without. Using powers reserved to Wakandan kings, T'Challa assumes the " \
                            "Black Panther mantel to join with girlfriend Nakia, the queen-mother, " \
                            "his princess-kid sister, members of the Dora Milaje (the Wakandan 'special forces') " \
                            "and an American secret agent, to prevent Wakanda from being dragged into a world war."

        self.assertEqual(movie.plotline, expected_plotline)

    def test_extract_trailer_from_details(self):
        movie = self.finder.create_media_from_details(MOVIE_DETAILS)
        youtube_trailer_url = "https://www.youtube.com/watch?v=xjDjIWPwcPU"
        self.assertEqual(movie.trailer_youtube_url, youtube_trailer_url)

    def test_extract_image_from_details(self):
        movie = self.finder.create_media_from_details(MOVIE_DETAILS)
        poster_image_url = "https://image.tmdb.org/t/p/original/uxzzxijgPIY7slzFvMotPv8wjKA.jpg"
        self.assertEqual(movie.poster_image_url, poster_image_url)

    def test_find_movie(self):
        query = {"query": "Black Panther", "year": 2018}
        movie = self.finder.find(query)
        self.assertIsInstance(movie, media.Movie)
